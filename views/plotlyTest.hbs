<head>
  <!-- Plotly.js -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
</head>

<select id='plotlyOptions'>
  <option value='awardee_dept'>Department</option>
  <option value='awarder_ID'>Giver</option>
  <option value='awardee_name'>Recipient</option>
  <option value='awardee_region'>Region</option>
</select>
<button id='plotlyLoad'>Load Data</button>

<!-- Plots go in blank <div> elements. 
    You can size them in the plot layout,
    or give the div a size as shown here.
-->
<div id="myplotly" style="width:90%;height:250px;"></div>
<button>Get Chart Data</button>

<script>
$(document).ready(function(){
  $("button").click(function(){
    $.ajax({
      url : '/plotlyTest/awardsReceived',
      type : 'GET',
      success : (body, textStatus, jqXHR) => {
          console.log(body);
          Plotly.plot(document.getElementById('myplotly'), JSON.parse(body), {
              "xaxis" : { 
                  "title" : "Recipient",
              },
              "yaxis" : {
                  "title" : "Awards"
              },
              "title" : "Awards Received"
          });
      },
      error : (jqXHR, textStatus, errorThrown) => {
          console.error(errorThrown);
      }
    })
  });
});
</script>
